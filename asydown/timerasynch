import asyncio


async def some_method():
    await asyncio.sleep(2)
    print('Done')


async def main():
    tasks = []
    sem = asyncio.Semaphore(2)
    async with sem:
        for i in range(20):
            tasks.append(some_method())

        await asyncio.gather(*tasks)

if __name__ == '__main__':
    asyncio.run(main())
